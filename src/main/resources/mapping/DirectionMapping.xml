<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bugmaker.mapper.DirectionMapper">

    <resultMap id="directMap" type="Direction">

        <id property="id" column="id" />
        <result property="name" column="name" />
        <result property="status" column="status" />
        <result property="enable" column="enable" />
        <result property="directDescribe" column="direct_describe" />
        <association property="dept" javaType="Dept" resultMap="com.bugmaker.mapper.DeptMapper.deptResult" />
    </resultMap>

    <!-- 添加专业方向 -->
    <insert id="insertDirection" >
        INSERT INTO direction (id, NAME, dept_id, direct_describe, status, enable)
        VALUES(
            replace(uuid(),"-",""), #{name}, #{dept.id} , #{directDescribe}, 1, 1
        )
    </insert>

    <!-- 根据学院查询所有专业方向 -->
    <select id="selectDirectionByDept" parameterType="Dept" resultMap="directMap">
        SELECT direc.*, d.id, dept_name
        FROM direction direc, dept d
        WHERE direc.dept_id = d.id AND d.id=#{id}
    </select>


</mapper>